{% extends "base/base.html.jinja" %}
{% import "base/challenge_card.html.jinja" as challenge_card %}
{% block content %}
    <div class="flex flex-col gap-4 mt-10">
        <div class="flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold text-white">Available Heists</h1>
                <p class="text-byte-brown-200">
                    Choose your target and crack the code with the fewest characters
                    possible.
                </p>
            </div>
            {% if account %}
                <a href="/challenge"
                   class="inline-flex h-10 items-center justify-center rounded-md border border-byte-green-700 bg-transparent px-8 text-sm font-medium shadow-sm transition-colors hover:bg-green-900 text-white gap-2">
                    {% include "icons/Plus--Streamline-Unicons.svg" %}
                    Create Heist
                </a>
            {% endif %}
        </div>
        <div class="flex flex-col sm:flex-row gap-4 mt-4">
            <div class="relative flex-grow flex">
                {% include "icons/magnifying-glass.svg" %}
                <input type="search"
                       placeholder="Search challenges..."
                       data-search-input
                       class="w-full pl-8 pr-4 py-2 bg-byte-brown-700 border border-byte-brown-500 text-white placeholder:text-byte-brown-200 rounded-md focus:outline-none focus:ring-2 focus:ring-green-700" />
            </div>
            {# <div class="flex gap-2">
                        <select data-difficulty-filter class="w-[180px] bg-byte-brown-700 border border-byte-brown-500 text-white px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-green-700">
                            <option value="all">All Difficulties</option>
                            <option value="easy">Easy</option>
                            <option value="medium">Medium</option>
                            <option value="hard">Hard</option>
                            <option value="expert">Expert</option>
                        </select>
                        <select data-time-filter class="w-[180px] bg-byte-brown-700 border border-byte-brown-500 text-white px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-green-700">
                            <option value="all">Any Time</option>
                            <option value="ending-soon">Ending Soon (&lt; 1 month)</option>
                            <option value="medium">Medium (1-3 months)</option>
                            <option value="long">Long (3+ months)</option>
                        </select>
                        <button class="border border-byte-brown-500 text-byte-brown-200 hover:text-white px-3 py-2 rounded-md transition-colors">
                            {% include "icons/filter.svg" %}
                        </button>
                    </div> #}
        </div>
        <!-- Tabs -->
        <div class="mt-6">
            <div class="bg-byte-brown-700 border border-byte-brown-500 rounded-lg p-1 flex w-fit">
                <button data-filter-tab="all"
                        class="px-6 py-2 text-sm font-medium text-white bg-green-900 rounded-md">All Heists</button>
                <button data-filter-tab="beta"
                        class="px-6 py-2 text-sm font-medium text-byte-brown-200 hover:text-white rounded-md">
                    Beta
                </button>
                <button data-filter-tab="code-golf"
                        class="px-6 py-2 text-sm font-medium text-byte-brown-200 hover:text-white rounded-md">
                    Code Golf
                </button>
                <button data-filter-tab="restricted-source"
                        class="px-6 py-2 text-sm font-medium text-byte-brown-200 hover:text-white rounded-md">
                    Restricted Source
                </button>
            </div>
        </div>
        <!-- All Heists Content -->
        <div class="mt-2">
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"
                 data-challenges-grid>
                {% if object.public_challenges %}
                    {% for challenge in object.public_challenges %}{{ challenge_card::challenge_box(challenge=challenge) }}{% endfor %}
                {% endif %}
                {% if object.beta_challenges %}
                    {% for challenge in object.beta_challenges %}
                        {{ challenge_card::challenge_box(challenge=challenge, beta=true) }}
                    {% endfor %}
                {% endif %}
                {% if not object.public_challenges and not object.beta_challenges %}
                    <div class="col-span-full text-center py-12">
                        <div class="text-byte-brown-200 text-lg">No challenges available yet.</div>
                        {% if account %}
                            <a href="/challenge"
                               class="inline-block mt-4 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-md transition-colors">
                                Create the First Challenge
                            </a>
                        {% endif %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock content %}

{% extends "base/base.html.jinja" %}
{% block content %}
<div class="flex min-h-screen flex-col bg-byte-brown-950">
  <main class="flex-1">
    <div class="max-w-8xl mx-auto py-8 px-4 sm:px-6 md:px-8 lg:px-28">
      <div class="flex flex-col gap-4 mt-10">
        <div class="flex justify-between items-center">
          <div>
            <h1 class="text-3xl font-bold text-white">Leaderboard</h1>
            <p class="text-byte-brown-200">The most skilled code crackers who've pulled off the perfect heist with
              minimal code.</p>
          </div>
        </div>
        <div class="flex flex-col sm:flex-row gap-4 mt-4">
          <div class="relative flex-grow flex">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24"
              stroke="currentColor" stroke-width="2" class="absolute left-2.5 top-3 h-4 w-4 text-byte-brown-200">
              <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" fill="none" />
              <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            <input type="search" placeholder="Search users..."
              class="w-full pl-8 pr-4 py-2 bg-byte-brown-700 border border-byte-brown-500 text-white placeholder:text-byte-brown-200 rounded-md focus:outline-none focus:ring-2 focus:ring-green-700" />
          </div>
        </div>
        <!-- Top 3 Cards -->
        {% if object.entries and object.entries | length >= 3 %}
        <div class="grid grid-cols-1 gap-6 mt-6">
          <!-- First Place -->
          <div class="bg-amber-100 dark:bg-amber-950/50 border border-amber-200 dark:border-amber-800 rounded-lg p-6">
            <div class="text-center">
              <div class="flex justify-center items-center gap-2 mb-4">
                <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" id="Cup-First--Streamline-Solar"
                  height="20" width="20">
                  <path
                    d="m21.9999 8.16234 0 0.07253c0 0.86074 0 1.29111 -0.2072 1.64323 -0.2072 0.3521 -0.5834 0.5611 -1.3358 0.9791l-0.7933 0.4408c0.5466 -1.84816 0.729 -3.83386 0.7965 -5.53203 0.0028 -0.07281 0.0061 -0.14652 0.0094 -0.221l0.0023 -0.05218c0.6513 0.22617 1.0169 0.39479 1.245 0.71129 0.2832 0.39284 0.2832 0.91465 0.2831 1.95826Z"
                    fill="currentColor" stroke-width="1"></path>
                  <path
                    d="m2 8.16234 0 0.07253c0.00003 0.86074 0.00004 1.29111 0.20723 1.64323 0.20719 0.3521 0.5834 0.5611 1.33582 0.9791l0.79376 0.441c-0.54674 -1.84819 -0.72914 -3.83398 -0.79656 -5.53223 -0.00289 -0.07281 -0.00615 -0.14652 -0.00944 -0.221l-0.00231 -0.05231c-0.65149 0.22624 -1.01724 0.39486 -1.2454 0.71142 -0.28314 0.39284 -0.28313 0.91465 -0.2831 1.95826Z"
                    fill="currentColor" stroke-width="1"></path>
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M16.3771 2.34674C15.2531 2.15709 13.7837 2 12.0002 2c-1.7836 0 -3.25296 0.15709 -4.37702 0.34674 -1.13873 0.19213 -1.7081 0.2882 -2.18381 0.87409 -0.47572 0.5859 -0.45058 1.21915 -0.4003 2.48564C5.21169 10.0544 6.14996 15.4851 11.25 15.9657V19.5H9.8198c-0.47668 0 -0.88709 0.3365 -0.98058 0.8039L8.65 21.25H6c-0.41421 0 -0.75 0.3358 -0.75 0.75s0.33579 0.75 0.75 0.75h12c0.4142 0 0.75 -0.3358 0.75 -0.75s-0.3358 -0.75 -0.75 -0.75h-2.65l-0.1892 -0.9461c-0.0935 -0.4674 -0.5039 -0.8039 -0.9806 -0.8039H12.75v-3.5343c5.1003 -0.4804 6.0386 -5.9112 6.2112 -10.25923 0.0503 -1.26649 0.0755 -1.89974 -0.4003 -2.48564 -0.4757 -0.58589 -1.045 -0.68196 -2.1838 -0.87409ZM12.787 5.80711c0.2803 0.11609 0.463 0.38957 0.463 0.69291V10.5c0 0.4142 -0.3358 0.75 -0.75 0.75s-0.75 -0.3358 -0.75 -0.75V8.31068l-0.2197 0.21967c-0.2929 0.2929 -0.7677 0.2929 -1.0606 0 -0.2929 -0.29289 -0.2929 -0.76777 0 -1.06066l1.5 -1.5c0.2145 -0.2145 0.5371 -0.27866 0.8173 -0.16258Z"
                    fill="currentColor" stroke-width="1"></path>
                </svg>
                <span class="font-bold text-amber-600">1st Place</span>
              </div>
              <div class="h-20 w-20 mx-auto border-4 border-amber-300 rounded-full overflow-hidden">
                <img src="{{ object.entries[0].author_avatar }}&size=80" alt="{{ object.entries[0].author_name }}"
                  class="w-full h-full object-cover" />
              </div>
              <h3 class="mt-4 text-xl font-bold text-slate-900 dark:text-white">{{ object.entries[0].author_name }}</h3>
              <p class="text-slate-600 dark:text-slate-400">{{ object.entries[0].total_score | format_number }} points
              </p>
              <div class="flex justify-center gap-2 mt-2">
                <span
                  class="bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200 text-xs px-2 py-1 rounded border border-amber-200 dark:border-amber-800">
                  {{ object.entries[0].solutions }} heists
                </span>
                {# <span
                  class="bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200 text-xs px-2 py-1 rounded border border-amber-200 dark:border-amber-800">
                  {{ object.entries[0].first_places or 0 }} first places
                </span> #}
              </div>
            </div>
          </div>
          <!-- Second and Third Place Container -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Second Place -->
            <div class="bg-green-50 dark:bg-green-950/50 border border-green-200 dark:border-green-800 rounded-lg p-6">
              <div class="text-center">
                <div class="flex justify-center items-center gap-2 mb-4">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                    id="Medal-Ribbons-Star--Streamline-Solar" height="20" width="20">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M12 16c3.866 0 7 -3.134 7 -7 0 -3.86599 -3.134 -7 -7 -7 -3.86599 0 -7 3.13401 -7 7 0 3.866 3.13401 7 7 7Zm0 -10c-0.2841 0 -0.4741 0.34084 -0.8541 1.02251l-0.0983 0.17636c-0.1079 0.19371 -0.1619 0.29057 -0.2461 0.35447 -0.0842 0.06391 -0.189 0.08763 -0.3987 0.13507l-0.1909 0.0432c-0.73794 0.16696 -1.10689 0.25044 -1.19467 0.53271 -0.08778 0.28227 0.16374 0.5764 0.6668 1.16466l0.13015 0.15219c0.14295 0.16716 0.21442 0.25074 0.24662 0.35414 0.0321 0.10339 0.0213 0.21489 -0.0003 0.43799l-0.0197 0.203c-0.07604 0.7849 -0.11406 1.1773 0.1157 1.3518 0.2299 0.1744 0.5753 0.0154 1.2662 -0.3027l0.1787 -0.0823c0.1964 -0.0904 0.2945 -0.1356 0.3986 -0.1356 0.1041 0 0.2022 0.0452 0.3986 0.1356l0.1787 0.0823c0.6909 0.3181 1.0363 0.4771 1.2662 0.3027 0.2298 -0.1745 0.1917 -0.5669 0.1157 -1.3518l-0.0197 -0.203c-0.0216 -0.2231 -0.0324 -0.3346 -0.0003 -0.43799 0.0322 -0.1034 0.1037 -0.18698 0.2466 -0.35413l0.1302 -0.1522c0.503 -0.58826 0.7546 -0.88239 0.6668 -1.16466 -0.0878 -0.28227 -0.4568 -0.36575 -1.1947 -0.53271l-0.1909 -0.0432c-0.2097 -0.04744 -0.3145 -0.07116 -0.3987 -0.13507 -0.0842 -0.0639 -0.1382 -0.16076 -0.2461 -0.35447l-0.0983 -0.17636C12.4741 6.34084 12.2841 6 12 6Z"
                      fill="currentColor" stroke-width="1"></path>
                    <path d="m4.49517 12.9941 -1.50311 1.5564c-0.54012 0.5592 -0.81018 0.8388 -0.90363 1.0756 -0.21295 0.5396 -0.03071 1.1382 0.43295 1.4221 0.20348 0.1245 0.57049 0.1633 1.30451 0.241 0.41441 0.0438 0.62166 0.0657 0.79521 0.1322 0.38856 0.149 0.69081 0.4619 0.83465 0.8642 0.06425 0.1797 0.08542 0.3943 0.12775 0.8234 0.07498 0.76 0.11247 
                  <path
                    d=" m13.2894 17.4025 2.4821 2.5699c0.5401 0.5592 0.8101 0.8388 1.0388 0.9356 0.5212 0.2205 1.0993
                      0.0318 1.3734 -0.4483 0.1203 -0.2107 0.1578 -0.5907 0.2328 -1.3507 0.0423 -0.4291 0.0635 -0.6437
                      0.1277 -0.8234 0.1439 -0.4023 0.4461 -0.7152 0.8347 -0.8642 0.1736 -0.0665 0.3808 -0.0884 0.7952
                      -0.1322 0.734 -0.0777 1.101 -0.1165 1.3045 -0.241 0.4637 -0.2839 0.6459 -0.8825 0.433 -1.4221
                      -0.0935 -0.2368 -0.3635 -0.5164 -0.9037 -1.0756l-1.5031 -1.5564c-1.2371 2.3194 -3.5179 3.9978
                      -6.2154 4.4084Z" fill="currentColor" stroke-width="1"></path>
                  </svg>
                  <span class="font-bold text-green-600">2nd Place</span>
                </div>
                <div class="h-20 w-20 mx-auto border-4 border-green-300 rounded-full overflow-hidden">
                  <img src="{{ object.entries[1].author_avatar }}&size=80" alt="{{ object.entries[1].author_name }}"
                    class="w-full h-full object-cover" />
                </div>
                <h3 class="mt-4 text-xl font-bold text-slate-900 dark:text-white">{{ object.entries[1].author_name }}
                </h3>
                <p class="text-slate-600 dark:text-slate-400">{{ object.entries[1].total_score | format_number }} points
                </p>
                <div class="flex justify-center gap-2 mt-2">
                  <span
                    class="bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs px-2 py-1 rounded border border-green-200 dark:border-green-800">
                    {{ object.entries[1].solutions }} heists
                  </span>
                  {# <span
                    class="bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs px-2 py-1 rounded border border-green-200 dark:border-green-800">
                    {{ object.entries[1].first_places or 0 }} first places
                  </span> #}
                </div>
              </div>
            </div>
            <!-- Third Place -->
            <div class="bg-amber-50 dark:bg-amber-950/50 border border-amber-200 dark:border-amber-800 rounded-lg p-6">
              <div class="text-center">
                <div class="flex justify-center items-center gap-2 mb-4">
                  <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"
                    id="Medal-Ribbons-Star--Streamline-Solar" height="20" width="20">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M12 16c3.866 0 7 -3.134 7 -7 0 -3.86599 -3.134 -7 -7 -7 -3.86599 0 -7 3.13401 -7 7 0 3.866 3.13401 7 7 7Zm0 -10c-0.2841 0 -0.4741 0.34084 -0.8541 1.02251l-0.0983 0.17636c-0.1079 0.19371 -0.1619 0.29057 -0.2461 0.35447 -0.0842 0.06391 -0.189 0.08763 -0.3987 0.13507l-0.1909 0.0432c-0.73794 0.16696 -1.10689 0.25044 -1.19467 0.53271 -0.08778 0.28227 0.16374 0.5764 0.6668 1.16466l0.13015 0.15219c0.14295 0.16716 0.21442 0.25074 0.24662 0.35414 0.0321 0.10339 0.0213 0.21489 -0.0003 0.43799l-0.0197 0.203c-0.07604 0.7849 -0.11406 1.1773 0.1157 1.3518 0.2299 0.1744 0.5753 0.0154 1.2662 -0.3027l0.1787 -0.0823c0.1964 -0.0904 0.2945 -0.1356 0.3986 -0.1356 0.1041 0 0.2022 0.0452 0.3986 0.1356l0.1787 0.0823c0.6909 0.3181 1.0363 0.4771 1.2662 0.3027 0.2298 -0.1745 0.1917 -0.5669 0.1157 -1.3518l-0.0197 -0.203c-0.0216 -0.2231 -0.0324 -0.3346 -0.0003 -0.43799 0.0322 -0.1034 0.1037 -0.18698 0.2466 -0.35413l0.1302 -0.1522c0.503 -0.58826 0.7546 -0.88239 0.6668 -1.16466 -0.0878 -0.28227 -0.4568 -0.36575 -1.1947 -0.53271l-0.1909 -0.0432c-0.2097 -0.04744 -0.3145 -0.07116 -0.3987 -0.13507 -0.0842 -0.0639 -0.1382 -0.16076 -0.2461 -0.35447l-0.0983 -0.17636C12.4741 6.34084 12.2841 6 12 6Z"
                      fill="currentColor" stroke-width="1"></path>
                    <path d="m4.49517 12.9941 -1.50311 1.5564c-0.54012 0.5592 -0.81018 0.8388 -0.90363 1.0756 -0.21295 0.5396 -0.03071 1.1382 0.43295 1.4221 0.20348 0.1245 0.57049 0.1633 1.30451 0.241 0.41441 0.0438 0.62166 0.0657 0.79521 0.1322 0.38856 0.149 0.69081 0.4619 0.83465 0.8642 0.06425 0.1797 0.08542 0.3943 0.12775 0.8234 0.07498 0.76 0.11247 
                  <path
                    d=" m13.2894 17.4025 2.4821 2.5699c0.5401 0.5592 0.8101 0.8388 1.0388 0.9356 0.5212 0.2205 1.0993
                      0.0318 1.3734 -0.4483 0.1203 -0.2107 0.1578 -0.5907 0.2328 -1.3507 0.0423 -0.4291 0.0635 -0.6437
                      0.1277 -0.8234 0.1439 -0.4023 0.4461 -0.7152 0.8347 -0.8642 0.1736 -0.0665 0.3808 -0.0884 0.7952
                      -0.1322 0.734 -0.0777 1.101 -0.1165 1.3045 -0.241 0.4637 -0.2839 0.6459 -0.8825 0.433 -1.4221
                      -0.0935 -0.2368 -0.3635 -0.5164 -0.9037 -1.0756l-1.5031 -1.5564c-1.2371 2.3194 -3.5179 3.9978
                      -6.2154 4.4084Z" fill="currentColor" stroke-width="1"></path>
                  </svg>
                  <span class="font-bold text-amber-600">3rd Place</span>
                </div>
                <div class="h-20 w-20 mx-auto border-4 border-amber-300 rounded-full overflow-hidden">
                  <img src="{{ object.entries[2].author_avatar }}&size=80" alt="{{ object.entries[2].author_name }}"
                    class="w-full h-full object-cover" />
                </div>
                <h3 class="mt-4 text-xl font-bold text-slate-900 dark:text-white">{{ object.entries[2].author_name }}
                </h3>
                <p class="text-slate-600 dark:text-slate-400">{{ object.entries[2].total_score | format_number }} points
                </p>
                <div class="flex justify-center gap-2 mt-2">
                  <span
                    class="bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200 text-xs px-2 py-1 rounded border border-amber-200 dark:border-amber-800">
                    {{ object.entries[2].solutions }} heists
                  </span>
                  {# <span
                    class="bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200 text-xs px-2 py-1 rounded border border-amber-200 dark:border-amber-800">
                    {{ object.entries[2].first_places or 0 }} first places
                  </span> #}
                </div>
              </div>
            </div>
          </div>
          {% endif %}
          <!-- Tabs -->
          <div class="mt-6">
            <div class="bg-byte-brown-700 border border-byte-brown-500 rounded-lg p-1 flex w-fit">
              <a href="/leaderboard/code-golf" class="px-6 py-2 text-sm font-medium
                        {% if object.category=='code-golf' %}
                          text-white bg-green-900
                        {% else %}
                          text-byte-brown-200 hover:text-white
                        {% endif %}
                        rounded-md transition-colors">Code Golf</a>
              <a href="/leaderboard/restricted-source" class="px-6 py-2 text-sm font-medium
                        {% if object.category=='restricted-source' %}
                          text-white bg-green-900
                        {% else %}
                          text-byte-brown-200 hover:text-white
                        {% endif %}
                        rounded-md transition-colors">Restricted Source</a>
            </div>
          </div>
          <!-- Leaderboard Table -->
          <div class="mt-4">
            <div class="bg-byte-brown-700 border border-byte-brown-500 rounded-lg overflow-hidden">
              <div class="overflow-auto">
                <table class="w-full">
                  <thead>
                    <tr class="border-b border-byte-brown-500">
                      <th class="text-left p-4 font-medium text-white">Rank</th>
                      <th class="text-left p-4 font-medium text-white">User</th>
                      <th class="text-left p-4 font-medium text-white">Points</th>
                      <th class="text-left p-4 font-medium text-white">Heists</th>
                      {# <th class="text-left p-4 font-medium text-white">First Places</th> #}
                      {# <th class="text-left p-4 font-medium text-white">Change</th> #}
                    </tr>
                  </thead>
                  <tbody>
                    {% for solution in object.entries %}
                    <tr class="border-b border-byte-brown-500 hover:bg-byte-brown-500/50 transition-colors">
                      <td class="p-4">
                        <div class="flex items-center gap-2">
                          {% if loop.index == 1 %}
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2" class="text-amber-600">
                            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6" stroke="currentColor" stroke-width="2"
                              stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M6 2v3a2 2 0 0 0 2 2h1" stroke="currentColor" stroke-width="2"
                              stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M6 15H4.5a2.5 2.5 0 0 0 0 5H6" stroke="currentColor" stroke-width="2"
                              stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M6 22v-3a2 2 0 0 0-2-2H3" stroke="currentColor" stroke-width="2"
                              stroke-linecap="round" stroke-linejoin="round" />
                          </svg>
                          {% elif loop.index == 2 %}
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2" class="text-green-600">
                            <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"
                              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                          </svg>
                          {% elif loop.index == 3 %}
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2" class="text-amber-600">
                            <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"
                              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                          </svg>
                          {% else %}
                          <span class="text-white">{{ loop.index }}</span>
                          {% endif %}
                        </div>
                      </td>
                      <td class="p-4">
                        <div class="flex items-center gap-2">
                          <div class="h-8 w-8 rounded-full overflow-hidden">
                            <img src="{{ solution.author_avatar }}&size=32" alt="{{ solution.author_name }}"
                              class="w-full h-full object-cover" />
                          </div>
                          <div>
                            <div class="font-medium text-white">
                              <a href="/user/{{ solution.author_id }}"
                                class="hover:text-byte-green-400 transition-colors">{{ solution.author_name }}</a>
                            </div>
                            <div class="text-xs text-byte-brown-200">Joined {{ solution.joined_date |
                              default(value='Unknown') }}</div>
                          </div>
                        </div>
                      </td>
                      <td class="p-4 text-white">{{ solution.total_score | format_number }}</td>
                      <td class="p-4 text-white">{{ solution.solutions }}</td>
                      <td class="p-4 text-white">{{ solution.first_places or 0 }}</td>
                      <td class="p-4">
                        {% if not solution.change %}
                        {% elif solution.change == "up" %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24"
                          stroke="currentColor" stroke-width="2" class="text-green-500">
                          <path d="m5 12 7-7 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                          <path d="M12 19V5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        </svg>
                        {% elif solution.change == "down" %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24"
                          stroke="currentColor" stroke-width="2" class="text-red-500">
                          <path d="m19 12-7 7-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                          <path d="M12 5v14" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        </svg>
                        {% else %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24"
                          stroke="currentColor" stroke-width="2" class="text-slate-400">
                          <path d="M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        </svg>
                        {% endif %}
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          {% if not object.entries %}
          <div class="text-center py-12">
            <div class="text-byte-brown-200 text-lg">No leaderboard data available yet.</div>
          </div>
          {% endif %}
        </div>
      </div>
  </main>
</div>
{% endblock content %}